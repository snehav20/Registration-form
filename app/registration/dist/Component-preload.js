//@ui5-bundle registration/Component-preload.js
sap.ui.predefine("registration/Component", ["sap/ui/core/UIComponent","registration/model/models"],(e,t)=>{"use strict";return e.extend("registration.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);jQuery.sap.includeStyleSheet(sap.ui.require.toUrl("registration/css/style.css"));this.setModel(t.createDeviceModel(),"device");this.getRouter().initialize()}})});
sap.ui.predefine("registration/controller/App.controller", ["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("registration.controller.App",{onInit(){}})});
sap.ui.predefine("registration/controller/View1.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageBox"],function(e,t,s){"use strict";return e.extend("registration.controller.View1",{onInit:function(){this.getView().setModel(new t({student:{firstName:"",lastName:"",dob:"",gender:"",grade:""},parent:{fatherName:"",motherName:"",mobile:"",address:""},fees:{feeType:"",amount:"",paymentStatus:"",receipts:[]},uploadBusy:false,showStep2:false,showStep3:false,showPreview:false,showSubmit:false}),"wizard")},onStudentChange:function(){const e=this.getView().getModel("wizard").getProperty("/student");this.getView().getModel("wizard").setProperty("/showStep2",!!e.firstName&&!!e.dob&&!!e.gender)},onStudentNext:function(){this.byId("studentStep").setValidated(true);this.byId("registrationWizard").nextStep()},onParentChange:function(e){const t=this.getView().getModel("wizard");const s=e.getSource().getBindingInfo("value").binding.getPath();t.setProperty("/parent/"+s.split("/").pop(),e.getParameter("value"));const a=t.getProperty("/parent");t.setProperty("/showStep3",a.fatherName&&a.motherName&&/^\d{10}$/.test(a.mobile))},onParentNext:function(){this.byId("parentStep").setValidated(true);this.byId("registrationWizard").nextStep()},onFeesChange:function(){var e=this.getView().getModel("wizard");var t=e.getProperty("/fees");var s=!!t.feeType&&!!t.amount&&!!t.paymentStatus&&t.receipts.length>0;e.setProperty("/showPreview",s)},onFeesNext:function(){var e=this.byId("registrationWizard");var t=this.getView().getModel("wizard");e.validateStep(this.byId("feesStep"));t.setProperty("/showSubmit",true);e.setCurrentStep(this.byId("previewStep"))},onReceiptChange:function(e){const t=this.getView().getModel("wizard");t.setProperty("/uploadBusy",true);const s=e.getSource().getDomRef("fu").files;const a=t.getProperty("/fees/receipts");setTimeout(()=>{Array.from(s).forEach(e=>a.push({fileName:e.name,url:URL.createObjectURL(e)}));t.setProperty("/fees/receipts",a);e.getSource().setValue("");t.setProperty("/uploadBusy",false);this.onFeesChange()},600)},onPreviewReceipt:function(e){const t=e.getSource().getParent().getParent();const s=t.getBindingContext("wizard");const a=s.getProperty("url");if(a){window.open(a,"_blank")}else{sap.m.MessageToast.show("No file to preview!")}},onDeleteReceipt:function(e){const t=e.getSource().indexOfItem(e.getParameter("listItem"));const s=this.getView().getModel("wizard");const a=s.getProperty("/fees/receipts");a.splice(t,1);s.setProperty("/fees/receipts",a);this.onFeesChange()},onSaveDraftPress:function(){this.onSaveDraft(false)},onSaveDraft:async function(e){const t=this.getOwnerComponent().getModel();const s=this.getView().getModel("wizard").getData();try{const a=t.bindList("/Parents");const o=a.create({FatherName:s.parent.fatherName,MotherName:s.parent.motherName,MobileNumber:s.parent.mobile,Address:s.parent.address});await o.created();const r=t.bindList("ParentstoStudents",o);const n=r.create({FirstName:s.student.firstName,LastName:s.student.lastName,DateOfBirth:s.student.dob,Gender:s.student.gender,Grade:s.student.grade});await n.created();const i=t.bindList("StudentstoFees",n);for(const e of s.fees.receipts||[]){await i.create({FeeType:s.fees.feeType,Amount:s.fees.amount,PaymentStatus:s.fees.paymentStatus,Receipts:e.fileName}).created()}this.getView().setBindingContext(o);if(!e){sap.m.MessageBox.information("Draft saved successfully")}}catch(e){console.error(e);sap.m.MessageBox.error("Draft save failed")}},onSubmit:async function(){const e=this.getView();const t=this.getOwnerComponent().getModel();let s=e.getBindingContext();try{if(s&&s.getProperty("IsActiveEntity")===false){await s.getModel().bindContext(s.getPath()+"/My.draftActivate(...)").execute();sap.m.MessageBox.confirm("Do you want to confirm Registration ",{actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],emphasizedAction:sap.m.MessageBox.Action.OK,onClose:function(){t.refresh();const s=this.byId("registrationWizard");const a=e.getModel("wizard");this.getView().setBindingContext(null);a.setData({student:{firstName:"",lastName:"",dob:"",gender:"",grade:""},parent:{fatherName:"",motherName:"",mobile:"",address:""},fees:{feeType:"",amount:"",paymentStatus:"",receipts:[]},showStep2:false,showStep3:false,showPreview:false,showSubmit:false});s.discardProgress(this.byId("studentStep"));s.goToStep(this.byId("studentStep"))}.bind(this)});return}await this.onSaveDraft(true);s=e.getBindingContext();await s.getModel().bindContext(s.getPath()+"/My.draftActivate(...)").execute();sap.m.MessageBox.success("Registration submitted successfully",{onClose:()=>{t.refresh();this._resetWizard()}});const a=this.byId("registrationWizard");const o=e.getModel("wizard");this.getView().setBindingContext(null);o.setData({student:{firstName:"",lastName:"",dob:"",gender:"",grade:""},parent:{fatherName:"",motherName:"",mobile:"",address:""},fees:{feeType:"",amount:"",paymentStatus:"",receipts:[]},showStep2:false,showStep3:false,showPreview:false,showSubmit:false});a.discardProgress(this.byId("studentStep"));a.goToStep(this.byId("studentStep"))}catch(e){console.error(e);sap.m.MessageBox.error(e.message||"Submit failed")}}})});
sap.ui.predefine("registration/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"registration/i18n/i18n.properties":'# This is the resource bundle for registration\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=App Title\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=App Title\n\n#XFLD,36\nregistration-Display.flpTitle=Registration\n',
	"registration/manifest.json":'{"_version":"1.76.0","sap.app":{"id":"registration","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.20.0","toolsId":"36902c41-0b1d-44c6-967b-7387b853996a"},"dataSources":{"mainService":{"uri":"/odata/v4/my/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"registration-Display":{"semanticObject":"registration","action":"Display","title":"{{registration-Display.flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.143.2","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"registration.i18n.i18n","supportedLocales":[""]}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"registration.view","async":true,"viewPath":"registration.view"},"routes":[{"name":"RouteView1","pattern":":?query:","target":["TargetView1"]}],"targets":{"TargetView1":{"id":"View1","name":"View1"}}},"rootView":{"viewName":"registration.view.App","type":"XML","id":"App","async":true},"flexBundle":false},"sap.cloud":{"public":true,"service":"Register"}}',
	"registration/view/App.view.xml":'<mvc:View controllerName="registration.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"registration/view/View1.view.xml":'<mvc:View\n    controllerName="registration.controller.View1"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:f="sap.f"\n    xmlns:form="sap.ui.layout.form"\n    xmlns:u="sap.ui.unified"><f:DynamicPage\n        id="registrationPage"\n        class="sapUiNoContentPadding"\n        showFooter="true"><f:title><f:DynamicPageTitle id="_IDGenDynamicPageTitle"><f:heading><HBox id="_IDGenHBox3"><core:Icon id="_IDGenIcon2" src="sap-icon://education" size="30px"/><Title id="_IDGenTitle" text="School Registration"/></HBox></f:heading></f:DynamicPageTitle></f:title><f:content><Wizard\n                id="registrationWizard"\n                renderMode="Page"\n                showNextButton="false"\n                class="sapUiResponsivePadding--header sapUiResponsivePadding--content"><WizardStep id="studentStep" title="Student Details" validated="false"><VBox id="_IDGenVBox" class="sapUiSmallMargin"><Label id="_IDGenLabel" text="First Name" required="true"/><Input id="_IDGenInput" value="{wizard>/student/firstName}" width="40%" liveChange=".onStudentChange"/><Label id="_IDGenLabel1" text="Last Name"/><Input id="_IDGenInput1" value="{wizard>/student/lastName}" width="40%"/><Label id="_IDGenLabel2" text="Date of Birth" required="true"/><DatePicker id="_IDGenDatePicker"\n                            value="{wizard>/student/dob}"\n                            valueFormat="yyyy-MM-dd"\n                            displayFormat="dd/MM/yyyy"\n                            width="40%"\n                            change=".onStudentChange"/><Label id="_IDGenLabel3" text="Gender" required="true"/><Select id="_IDGenSelect" selectedKey="{wizard>/student/gender}" change=".onStudentChange"><core:Item id="_IDGenItem" key="" text="-- Select Gender --"/><core:Item id="_IDGenItem1" key="Male" text="Male"/><core:Item id="_IDGenItem2" key="Female" text="Female"/></Select><Label id="_IDGenLabel4" text="Grade"/><Select id="_IDGenSelect1" selectedKey="{wizard>/student/grade}" width="20%"><core:Item id="_IDGenItem3" key="" text="-- Select Class --"/><core:Item id="_IDGenItem4" key="Class1" text="Class 1"/><core:Item id="_IDGenItem5" key="Class2" text="Class 2"/><core:Item id="_IDGenItem6" key="Class3" text="Class 3"/><core:Item id="_IDGenItem14" key="Class3" text="Class 4"/><core:Item id="_IDGenItem15" key="Class3" text="Class 5"/></Select><Button id="_IDGenButton"\n                            text="Step2"\n                            type="Emphasized"\n                            press=".onStudentNext"\n                            visible="{wizard>/showStep2}"/></VBox></WizardStep><WizardStep id="parentStep" title="Parent Details" validated="false"><VBox id="_IDGenVBox1" class="sapUiSmallMargin"><Label id="_IDGenLabel5" text="Father Name" required="true"/><Input id="_IDGenInput2" value="{wizard>/parent/fatherName}" width="40%" liveChange=".onParentChange"/><Label id="_IDGenLabel6" text="Mother Name" required="true"/><Input id="_IDGenInput3" value="{wizard>/parent/motherName}" width="40%" liveChange=".onParentChange"/><Label id="_IDGenLabel7" text="Mobile Number" required="true"/><Input id="_IDGenInput4"\n                            value="{wizard>/parent/mobile}"\n                            type="Tel"\n                            maxLength="10"\n                            width="40%"\n                            liveChange=".onParentChange"/><Label id="_IDGenLabel8" text="Address"/><TextArea id="_IDGenTextArea" value="{wizard>/parent/address}" rows="4"/><Button id="_IDGenButton1"\n                            text="Step3"\n                            type="Emphasized"\n                            press=".onParentNext"\n                            visible="{wizard>/showStep3}"/></VBox></WizardStep><WizardStep id="feesStep" title="Fees Details" validated="false"><VBox id="_IDGenVBox2" class="sapUiSmallMargin"><Label id="_IDGenLabel9" text="Fee Type" required="true"/><Select id="_IDGenSelect2" selectedKey="{wizard>/fees/feeType}" change=".onFeesChange" width="30%"><core:Item id="_IDGenItem7" key="" text="-- Select Fee Type --"/><core:Item id="_IDGenItem8" key="Online" text="Online"/><core:Item id="_IDGenItem9" key="Cash" text="Cash"/></Select><Label id="_IDGenLabel10" text="Amount" required="true"/><Input id="_IDGenInput5"\n                            value="{wizard>/fees/amount}"\n                            type="Number"\n                            width="20%"\n                            liveChange=".onFeesChange"/><Label id="_IDGenLabel11" text="Payment Status" required="true"/><Select id="_IDGenSelect3" selectedKey="{wizard>/fees/paymentStatus}" change=".onFeesChange" width="30%"><core:Item id="_IDGenItem10" key="" text="-- Select Status --"/><core:Item id="_IDGenItem11" key="Pending" text="Pending"/><core:Item id="_IDGenItem12" key="Paid" text="Paid"/></Select><VBox id="_IDGenVBox4" busy="{wizard>/uploadBusy}" busyIndicatorDelay="0"><Label id="_IDGenLabel12" text="Upload Fee Receipt" required="true"/><u:FileUploader\n                            id="receiptUploader"\n                            multiple="true"\n                            sameFilenameAllowed="true"\n                            fileType="pdf,jpg,jpeg,png"\n                            maximumFileSize="5"\n                            placeholder="Choose a file..."\n                            buttonText="Upload Receipt"\n                            change=".onReceiptChange"/><List id="_IDGenList"\n                            headerText="Uploaded Receipts"\n                            items="{wizard>/fees/receipts}"\n                            mode="Delete"\n                            delete=".onDeleteReceipt"\n                            class="sapUiSmallMarginTop"><CustomListItem id="_IDGenCustomListItem"><HBox id="_IDGenHBox" justifyContent="SpaceBetween" alignItems="Center" width="100%"><HBox id="_IDGenHBox1" alignItems="Center"><core:Icon id="_IDGenIcon" src="sap-icon://attachment" class="sapUiSmallMarginEnd"/><Text id="_IDGenText" text="{wizard>fileName}"/></HBox><Button id="_IDGenButton2"\n                                        icon="sap-icon://show"\n                                        type="Transparent"\n                                        press=".onPreviewReceipt"/></HBox></CustomListItem></List></VBox><Button id="_IDGenButton3"\n                            text="Preview"\n                            type="Emphasized"\n                            press=".onFeesNext"\n                            visible="{wizard>/showPreview}"/></VBox></WizardStep><WizardStep id="previewStep" title="Preview" validated="false"><VBox id="_IDGenVBox3" class="sapUiSmallMargin"><Title id="_IDGenTitle1" text="Student Details" level="H3"/><form:SimpleForm id="_IDGenSimpleForm"\n            editable="false"\n            layout="ResponsiveGridLayout"\n            class="sapUiSmallMarginBottom"><Label id="_IDGenLabel13" text="First Name"/><Text id="_IDGenText2" text="{wizard>/student/firstName}"/><Label id="_IDGenLabel14" text="Last Name"/><Text id="_IDGenText3" text="{wizard>/student/lastName}"/><Label id="_IDGenLabel15" text="Date of Birth"/><Text id="_IDGenText4" text="{wizard>/student/dob}"/><Label id="_IDGenLabel16" text="Gender"/><Text id="_IDGenText5" text="{wizard>/student/gender}"/><Label id="_IDGenLabel17" text="Grade"/><Text id="_IDGenText6" text="{wizard>/student/grade}"/></form:SimpleForm><Title id="_IDGenTitle3" text="Parent Details" level="H3" class="sapUiSmallMarginTop"/><form:SimpleForm id="_IDGenSimpleForm1"\n            editable="false"\n            layout="ResponsiveGridLayout"\n            class="sapUiSmallMarginBottom"><Label id="_IDGenLabel18" text="Father Name"/><Text id="_IDGenText7" text="{wizard>/parent/fatherName}"/><Label id="_IDGenLabel19" text="Mother Name"/><Text id="_IDGenText8" text="{wizard>/parent/motherName}"/><Label id="_IDGenLabel20" text="Mobile Number"/><Text id="_IDGenText9" text="{wizard>/parent/mobile}"/><Label id="_IDGenLabel21" text="Address"/><Text id="_IDGenText10" text="{wizard>/parent/address}"/></form:SimpleForm><Title id="_IDGenTitle4" text="Fees Details" level="H3" class="sapUiSmallMarginTop"/><form:SimpleForm id="_IDGenSimpleForm2"\n            editable="false"\n            layout="ResponsiveGridLayout"\n            class="sapUiSmallMarginBottom"><Label id="_IDGenLabel22" text="Fee Type"/><Text id="_IDGenText11" text="{wizard>/fees/feeType}"/><Label id="_IDGenLabel23" text="Amount"/><Text id="_IDGenText12" text="{wizard>/fees/amount}"/><Label id="_IDGenLabel24" text="Payment Status"/><Text id="_IDGenText13" text="{wizard>/fees/paymentStatus}"/></form:SimpleForm><Title id="_IDGenTitle2" text="Uploaded Receipts" class="sapUiSmallMarginTop"/><List id="_IDGenList1" items="{wizard>/fees/receipts}"><StandardListItem id="_IDGenStandardListItem"\n                                title="{wizard>fileName}"\n                                icon="sap-icon://attachment"/><CustomListItem id="_IDGenCustomListItem1" ><HBox id="_IDGenHBox2" justifyContent="SpaceBetween" alignItems="Center"><Text id="_IDGenText14" text="{wizard>fileName}"/><Button id="_IDGenButton6"\n                            icon="sap-icon://show"\n                            type="Transparent"\n                            width="30%"\n                            press=".onPreviewReceipt"/></HBox></CustomListItem></List></VBox></WizardStep></Wizard></f:content><f:footer><OverflowToolbar id="_IDGenOverflowToolbar1"><ToolbarSpacer id="_IDGenToolbarSpacer"/><Button\n            id="_IDGenButtonSaveDraft"\n            text="Save as Draft"\n            type="Default"\n            visible="{wizard>/showSubmit}"\n            press=".onSaveDraftPress"/><Button id="_IDGenButton4"\n                    text="Submit Registration"\n                    type="Emphasized"\n                    visible="{wizard>/showSubmit}"\n                    press=".onSubmit"/></OverflowToolbar></f:footer></f:DynamicPage></mvc:View>\n'
});
//# sourceMappingURL=Component-preload.js.map
